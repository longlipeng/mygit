<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="ORDERCARDPINLIST" >
  <select id="selectOrderCardPinListByDTO" parameterClass="com.huateng.accor.orderpin.dto.OrderCardPinListQueryDTO" resultClass="java.util.HashMap" remapResults="true">
    <include refid="Commons.prefixSql"/>
	    select T1.ORDER_CARD_ID as "orderCardId", 
	    	   T1.CARD_NO as "cardNo", 
	    	   T1.ORDER_CARD_PIN_ID   as "orderCardPinId",
	    	   T1.PRODUCT_ID as "productId", 
	    	   T1.CARD_LAYOUT_ID as "cardLayoutId", 
	    	   T1.FACE_VALUE_TYPE as "faceValueType",
	      	   T1.FACE_VALUE as "faceValue", 
	      	   T1.CARD_STATE as "cardState", 
	      	   T1.CARD_VALID_DATE as "cardValidDate", 
	      	   T1.CREATE_USER as "createUser", 
	      	   T1.CREATE_TIME as "createTime",
	      	   T1.MODIFY_USER as "modifyUser", 
	      	   T1.MODIFY_TIME as "modifyTime", 
	      	   T1.DATA_STATE as "dateState",
	      	   T2.USER_NAME AS "userName"
	    from TB_ENT_ORDER_CARD_PIN_LIST T1,
	    	 TB_ENT_USER T2
	    where T1.DATA_STATE = '1'
	    	  AND T1.CREATE_USER = T2.USER_ID(+)
    <dynamic>
      <isNotNull prepend="and" property="cardNo">
        T1.CARD_NO = #cardNo:DECIMAL#
      </isNotNull>
      <isNotNull prepend="and" property="cardState">
        T1.CARD_STATE = #cardState:DECIMAL#
      </isNotNull>
      <isNotNull prepend="and" property="orderCardPinId">
        T1.ORDER_CARD_PIN_ID = #orderCardPinId:DECIMAL#
      </isNotNull>
    </dynamic>
    <include refid="Commons.suffixSql"/>
  </select>
</sqlMap>
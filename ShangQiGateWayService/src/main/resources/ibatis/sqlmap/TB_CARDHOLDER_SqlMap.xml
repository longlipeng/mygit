<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="TB_CARDHOLDER">
  <resultMap class="com.huateng.framework.ibatis.model.Cardholder" id="abatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    <result column="CARDHOLDER_ID" jdbcType="VARCHAR" property="cardholderId" />
    <result column="ENTITY_ID" jdbcType="VARCHAR" property="entityId" />
    <result column="LAST_NAME" jdbcType="VARCHAR" property="lastName" />
    <result column="FIRST_NAME" jdbcType="VARCHAR" property="firstName" />
    <result column="ID_TYPE" jdbcType="VARCHAR" property="idType" />
    <result column="ID_NO" jdbcType="VARCHAR" property="idNo" />
    <result column="CARDHOLDER_MOBILE" jdbcType="VARCHAR" property="cardholderMobile" />
    <result column="CARDHOLDER_EMAIL" jdbcType="VARCHAR" property="cardholderEmail" />
    <result column="EXTERNAL_ID" jdbcType="VARCHAR" property="externalId" />
    <result column="DEPARTMENT_ID" jdbcType="VARCHAR" property="departmentId" />
    <result column="CARDHOLDER_BIRTHDAY" jdbcType="CHAR" property="cardholderBirthday" />
    <result column="CARDHOLDER_GENDER" jdbcType="VARCHAR" property="cardholderGender" />
    <result column="CARDHOLDER_SALUTATION" jdbcType="VARCHAR" property="cardholderSalutation" />
    <result column="CARDHOLDER_FUNCTION" jdbcType="VARCHAR" property="cardholderFunction" />
    <result column="CARDHOLDER_SEGMENT" jdbcType="VARCHAR" property="cardholderSegment" />
    <result column="CARDHOLDER_STATE" jdbcType="CHAR" property="cardholderState" />
    <result column="CLOSE_DATE" jdbcType="CHAR" property="closeDate" />
    <result column="CARDHOLDER_COMMENT" jdbcType="VARCHAR" property="cardholderComment" />
    <result column="VID" jdbcType="VARCHAR" property="vid" />
    <result column="PLATE_NUMBER" jdbcType="VARCHAR" property="plateNumber" />
    <result column="DRIVER_LICENCE" jdbcType="VARCHAR" property="driverLicence" />
    <result column="CREATE_USER" jdbcType="VARCHAR" property="createUser" />
    <result column="CREATE_TIME" jdbcType="CHAR" property="createTime" />
    <result column="MODIFY_USER" jdbcType="VARCHAR" property="modifyUser" />
    <result column="MODIFY_TIME" jdbcType="CHAR" property="modifyTime" />
    <result column="DATA_STATE" jdbcType="CHAR" property="dataState" />
    <result column="MEMBER_ID" jdbcType="VARCHAR" property="memberId" />
    <result column="CHECK_STATE" jdbcType="VARCHAR" property="checkState" />
    <result column="MAILING_ADDRESS" jdbcType="VARCHAR" property="mailingAddress" />
  </resultMap>
  <sql id="abatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="abatorgenerated_selectByExample" parameterClass="com.huateng.framework.ibatis.model.CardholderExample" resultMap="abatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    select CARDHOLDER_ID, ENTITY_ID, LAST_NAME, FIRST_NAME, ID_TYPE, ID_NO, CARDHOLDER_MOBILE,
      CARDHOLDER_EMAIL, EXTERNAL_ID, DEPARTMENT_ID, CARDHOLDER_BIRTHDAY, CARDHOLDER_GENDER,
      CARDHOLDER_SALUTATION, CARDHOLDER_FUNCTION, CARDHOLDER_SEGMENT, CARDHOLDER_STATE, CLOSE_DATE,
      CARDHOLDER_COMMENT, VID, PLATE_NUMBER, DRIVER_LICENCE, CREATE_USER, CREATE_TIME, MODIFY_USER,
      MODIFY_TIME, DATA_STATE, MEMBER_ID, CHECK_STATE, MAILING_ADDRESS
    from TB_CARDHOLDER
    <isParameterPresent>
      <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.huateng.framework.ibatis.model.CardholderExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    delete from TB_CARDHOLDER
    <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.huateng.framework.ibatis.model.Cardholder">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    insert into TB_CARDHOLDER (CARDHOLDER_ID, ENTITY_ID, LAST_NAME, FIRST_NAME, ID_TYPE, ID_NO,
      CARDHOLDER_MOBILE, CARDHOLDER_EMAIL, EXTERNAL_ID, DEPARTMENT_ID, CARDHOLDER_BIRTHDAY,
      CARDHOLDER_GENDER, CARDHOLDER_SALUTATION, CARDHOLDER_FUNCTION, CARDHOLDER_SEGMENT,
      CARDHOLDER_STATE, CLOSE_DATE, CARDHOLDER_COMMENT, VID, PLATE_NUMBER, DRIVER_LICENCE,
      CREATE_USER, CREATE_TIME, MODIFY_USER, MODIFY_TIME, DATA_STATE, MEMBER_ID, CHECK_STATE,
      MAILING_ADDRESS)
    values (#cardholderId:VARCHAR#, #entityId:VARCHAR#, #lastName:VARCHAR#, #firstName:VARCHAR#,
      #idType:VARCHAR#, #idNo:VARCHAR#, #cardholderMobile:VARCHAR#, #cardholderEmail:VARCHAR#,
      #externalId:VARCHAR#, #departmentId:VARCHAR#, #cardholderBirthday:CHAR#,
      #cardholderGender:VARCHAR#, #cardholderSalutation:VARCHAR#, #cardholderFunction:VARCHAR#,
      #cardholderSegment:VARCHAR#, #cardholderState:CHAR#, #closeDate:CHAR#,
      #cardholderComment:VARCHAR#, #vid:VARCHAR#, #plateNumber:VARCHAR#, #driverLicence:VARCHAR#,
      #createUser:VARCHAR#, #createTime:CHAR#, #modifyUser:VARCHAR#, #modifyTime:CHAR#,
      #dataState:CHAR#, #memberId:VARCHAR#, #checkState:VARCHAR#, #mailingAddress:VARCHAR#)
  </insert>
  <insert id="abatorgenerated_insertSelective" parameterClass="com.huateng.framework.ibatis.model.Cardholder">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    insert into TB_CARDHOLDER
    <dynamic prepend="(">
      <isNotNull prepend="," property="cardholderId">
        CARDHOLDER_ID
      </isNotNull>
      <isNotNull prepend="," property="entityId">
        ENTITY_ID
      </isNotNull>
      <isNotNull prepend="," property="lastName">
        LAST_NAME
      </isNotNull>
      <isNotNull prepend="," property="firstName">
        FIRST_NAME
      </isNotNull>
      <isNotNull prepend="," property="idType">
        ID_TYPE
      </isNotNull>
      <isNotNull prepend="," property="idNo">
        ID_NO
      </isNotNull>
      <isNotNull prepend="," property="cardholderMobile">
        CARDHOLDER_MOBILE
      </isNotNull>
      <isNotNull prepend="," property="cardholderEmail">
        CARDHOLDER_EMAIL
      </isNotNull>
      <isNotNull prepend="," property="externalId">
        EXTERNAL_ID
      </isNotNull>
      <isNotNull prepend="," property="departmentId">
        DEPARTMENT_ID
      </isNotNull>
      <isNotNull prepend="," property="cardholderBirthday">
        CARDHOLDER_BIRTHDAY
      </isNotNull>
      <isNotNull prepend="," property="cardholderGender">
        CARDHOLDER_GENDER
      </isNotNull>
      <isNotNull prepend="," property="cardholderSalutation">
        CARDHOLDER_SALUTATION
      </isNotNull>
      <isNotNull prepend="," property="cardholderFunction">
        CARDHOLDER_FUNCTION
      </isNotNull>
      <isNotNull prepend="," property="cardholderSegment">
        CARDHOLDER_SEGMENT
      </isNotNull>
      <isNotNull prepend="," property="cardholderState">
        CARDHOLDER_STATE
      </isNotNull>
      <isNotNull prepend="," property="closeDate">
        CLOSE_DATE
      </isNotNull>
      <isNotNull prepend="," property="cardholderComment">
        CARDHOLDER_COMMENT
      </isNotNull>
      <isNotNull prepend="," property="vid">
        VID
      </isNotNull>
      <isNotNull prepend="," property="plateNumber">
        PLATE_NUMBER
      </isNotNull>
      <isNotNull prepend="," property="driverLicence">
        DRIVER_LICENCE
      </isNotNull>
      <isNotNull prepend="," property="createUser">
        CREATE_USER
      </isNotNull>
      <isNotNull prepend="," property="createTime">
        CREATE_TIME
      </isNotNull>
      <isNotNull prepend="," property="modifyUser">
        MODIFY_USER
      </isNotNull>
      <isNotNull prepend="," property="modifyTime">
        MODIFY_TIME
      </isNotNull>
      <isNotNull prepend="," property="dataState">
        DATA_STATE
      </isNotNull>
      <isNotNull prepend="," property="memberId">
        MEMBER_ID
      </isNotNull>
      <isNotNull prepend="," property="checkState">
        CHECK_STATE
      </isNotNull>
      <isNotNull prepend="," property="mailingAddress">
        MAILING_ADDRESS
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="cardholderId">
        #cardholderId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="entityId">
        #entityId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="lastName">
        #lastName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="firstName">
        #firstName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="idType">
        #idType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="idNo">
        #idNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderMobile">
        #cardholderMobile:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderEmail">
        #cardholderEmail:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="externalId">
        #externalId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="departmentId">
        #departmentId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderBirthday">
        #cardholderBirthday:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderGender">
        #cardholderGender:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderSalutation">
        #cardholderSalutation:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderFunction">
        #cardholderFunction:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderSegment">
        #cardholderSegment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderState">
        #cardholderState:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="closeDate">
        #closeDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="cardholderComment">
        #cardholderComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="vid">
        #vid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="plateNumber">
        #plateNumber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="driverLicence">
        #driverLicence:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createUser">
        #createUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="createTime">
        #createTime:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyUser">
        #modifyUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="modifyTime">
        #modifyTime:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="dataState">
        #dataState:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="memberId">
        #memberId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="checkState">
        #checkState:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="mailingAddress">
        #mailingAddress:VARCHAR#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="abatorgenerated_countByExample" parameterClass="com.huateng.framework.ibatis.model.CardholderExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    select count(*) from TB_CARDHOLDER
    <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
  </select>
  <update id="abatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    update TB_CARDHOLDER
    <dynamic prepend="set">
      <isNotNull prepend="," property="record.cardholderId">
        CARDHOLDER_ID = #record.cardholderId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.entityId">
        ENTITY_ID = #record.entityId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.lastName">
        LAST_NAME = #record.lastName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.firstName">
        FIRST_NAME = #record.firstName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.idType">
        ID_TYPE = #record.idType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.idNo">
        ID_NO = #record.idNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderMobile">
        CARDHOLDER_MOBILE = #record.cardholderMobile:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderEmail">
        CARDHOLDER_EMAIL = #record.cardholderEmail:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.externalId">
        EXTERNAL_ID = #record.externalId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.departmentId">
        DEPARTMENT_ID = #record.departmentId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderBirthday">
        CARDHOLDER_BIRTHDAY = #record.cardholderBirthday:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderGender">
        CARDHOLDER_GENDER = #record.cardholderGender:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderSalutation">
        CARDHOLDER_SALUTATION = #record.cardholderSalutation:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderFunction">
        CARDHOLDER_FUNCTION = #record.cardholderFunction:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderSegment">
        CARDHOLDER_SEGMENT = #record.cardholderSegment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderState">
        CARDHOLDER_STATE = #record.cardholderState:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.closeDate">
        CLOSE_DATE = #record.closeDate:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.cardholderComment">
        CARDHOLDER_COMMENT = #record.cardholderComment:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.vid">
        VID = #record.vid:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.plateNumber">
        PLATE_NUMBER = #record.plateNumber:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.driverLicence">
        DRIVER_LICENCE = #record.driverLicence:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.createUser">
        CREATE_USER = #record.createUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.createTime">
        CREATE_TIME = #record.createTime:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.modifyUser">
        MODIFY_USER = #record.modifyUser:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.modifyTime">
        MODIFY_TIME = #record.modifyTime:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.dataState">
        DATA_STATE = #record.dataState:CHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.memberId">
        MEMBER_ID = #record.memberId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.checkState">
        CHECK_STATE = #record.checkState:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.mailingAddress">
        MAILING_ADDRESS = #record.mailingAddress:VARCHAR#
      </isNotNull>
    </dynamic>
    <isParameterPresent>
      <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Nov 17 18:07:28 CST 2017.
    -->
    update TB_CARDHOLDER
    set CARDHOLDER_ID = #record.cardholderId:VARCHAR#,
      ENTITY_ID = #record.entityId:VARCHAR#,
      LAST_NAME = #record.lastName:VARCHAR#,
      FIRST_NAME = #record.firstName:VARCHAR#,
      ID_TYPE = #record.idType:VARCHAR#,
      ID_NO = #record.idNo:VARCHAR#,
      CARDHOLDER_MOBILE = #record.cardholderMobile:VARCHAR#,
      CARDHOLDER_EMAIL = #record.cardholderEmail:VARCHAR#,
      EXTERNAL_ID = #record.externalId:VARCHAR#,
      DEPARTMENT_ID = #record.departmentId:VARCHAR#,
      CARDHOLDER_BIRTHDAY = #record.cardholderBirthday:CHAR#,
      CARDHOLDER_GENDER = #record.cardholderGender:VARCHAR#,
      CARDHOLDER_SALUTATION = #record.cardholderSalutation:VARCHAR#,
      CARDHOLDER_FUNCTION = #record.cardholderFunction:VARCHAR#,
      CARDHOLDER_SEGMENT = #record.cardholderSegment:VARCHAR#,
      CARDHOLDER_STATE = #record.cardholderState:CHAR#,
      CLOSE_DATE = #record.closeDate:CHAR#,
      CARDHOLDER_COMMENT = #record.cardholderComment:VARCHAR#,
      VID = #record.vid:VARCHAR#,
      PLATE_NUMBER = #record.plateNumber:VARCHAR#,
      DRIVER_LICENCE = #record.driverLicence:VARCHAR#,
      CREATE_USER = #record.createUser:VARCHAR#,
      CREATE_TIME = #record.createTime:CHAR#,
      MODIFY_USER = #record.modifyUser:VARCHAR#,
      MODIFY_TIME = #record.modifyTime:CHAR#,
      DATA_STATE = #record.dataState:CHAR#,
      MEMBER_ID = #record.memberId:VARCHAR#,
      CHECK_STATE = #record.checkState:VARCHAR#,
      MAILING_ADDRESS = #record.mailingAddress:VARCHAR#
    <isParameterPresent>
      <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  
  <select id="selectCardHolderOnDelete" parameterClass="java.lang.String" resultClass="java.lang.Integer">

   select COUNT(*) 
   FROM
     TB_SELL_ORDER T1
   LEFT JOIN
     TB_SELL_ORDER_CARD_LIST T2
   ON
     T1.ORDER_ID=T2.ORDER_ID
   WHERE 
     T1.ORDER_STATE!=0
     AND
     T2.CARDHOLDER_ID=# cardholderId:VARCHAR#  
  </select>
  
  <select id="selectCardHolderByCardNo" parameterClass="java.lang.String" resultClass="com.allinfinance.univer.seller.cardholder.dto.CardholderQueryDTO">

        select 
        cardHolder.cardholder_id as "cardholderId",
        cardHolder.first_name as "firstName" , 
        cardHolder.id_no as "idNo", 
        cardHolder.id_type as "idType", 
        cardHolder.cardholder_mobile as "cardholderMobile" 
        from tb_sell_order ord,tb_sell_order_card_list cardList,tb_cardholder cardHolder 
     where (ord.order_state = '32' or ord.order_state is null) and cardList.Card_No=#cardNo:VARCHAR# and cardList.Cardholder_Id=cardHolder.Cardholder_Id
      and ord.order_id=cardList.Order_Id order by ord.modify_time desc
  </select>
</sqlMap>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="Commons">
    <!-- 取下一个值 -->
    <statement id="getNextValueOfSequence" resultClass="long">
        <!--select $sequenceName$.nextVal from dual  by youyong 屏蔽并添加下面一句-->
        select $sequenceName$.nextVal from SYSIBM.SYSDUMMY1
    </statement>

    <!-- 定义综合查询前缀，后缀sql -->
    <sql id="prefixSql">
    <dynamic>
    <isEqual property="doCount" compareValue="true">
        select count(*) as $COUNT_ALL_NAME$ from (
    </isEqual>
    <isEqual property="doCount" compareValue="false">
        <isEqual property="queryAll" compareValue="false">
            SELECT * FROM (
            SELECT * FROM (select row_.*, rownumber() over()  start_rownum_ from (
        </isEqual>
        <isNotNull property="sort">
            SELECT * FROM (
        </isNotNull>
    </isEqual>
    </dynamic>
    </sql>
    <sql id="suffixSql">
    <dynamic>
    <isEqual property="doCount" compareValue="true">
        )
    </isEqual>
    <isEqual property="doCount" compareValue="false">
        <isEqual property="sort" compareValue="asc">
            ) order_by_ ORDER BY order_by_."$sortFieldName$" asc
        </isEqual>
        <isEqual property="sort" compareValue="desc">
            ) order_by_ ORDER BY order_by_."$sortFieldName$" desc
        </isEqual>
        <isEqual property="queryAll" compareValue="false">
            <![CDATA[
            )row_ 
            ) WHERE start_rownum_ <= #lastCursorPosition# ) page_  WHERE start_rownum_ >= #firstCursorPosition#
            ]]>
        </isEqual>
    </isEqual>
    </dynamic>
    </sql>
    
    
    
    
    
    
     <sql id="shopprefixSql">
    <dynamic>
    <isEqual property="doCount" compareValue="true">
        select count(*) as $COUNT_ALL_NAME$ from (
    </isEqual>
    <isEqual property="doCount" compareValue="false">
        <isEqual property="queryAll" compareValue="false">
            SELECT * FROM (
            SELECT * FROM (select row_.*, rownumber() over()  start_rownum_ from (
        </isEqual>
            SELECT * FROM (
    </isEqual>
    </dynamic>
    </sql>
        
    <sql id="shopsuffixSql">
    	 <dynamic>
    <isEqual property="doCount" compareValue="true">
        )
    </isEqual>
    <isEqual property="doCount" compareValue="false">
        <isEqual property="sort" compareValue="asc">
            ) order_by_ ORDER BY order_by_."$sortFieldName$" asc
        </isEqual>
        <isEqual property="sort" compareValue="desc">
            ) order_by_ ORDER BY order_by_."$sortFieldName$" desc
        </isEqual>
        <isNull property="sort">
        	 ) order_by_ ORDER BY order_by_."shopId",order_by_."tranTime" desc
        </isNull>
        <isEqual property="queryAll" compareValue="false">
            <![CDATA[
             )
             ) WHERE start_rownum_ <= #lastCursorPosition# ) page_  WHERE start_rownum_ >= #firstCursorPosition#
            ]]>
        </isEqual>
    </isEqual>
    </dynamic>	
    
    </sql>
    
    
</sqlMap>
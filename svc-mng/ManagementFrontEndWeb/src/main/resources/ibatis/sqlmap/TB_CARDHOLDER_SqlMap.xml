<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="TB_CARDHOLDER">
  <resultMap class="com.huateng.framework.ibatis.model.Cardholder" id="abatorgenerated_CardholderResult">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    <result column="CARDHOLDER_ID" jdbcType="VARCHAR" property="cardholderId" />
    <result column="ENTITY_ID" jdbcType="VARCHAR" property="entityId" />
    <result column="LAST_NAME" jdbcType="VARCHAR" property="lastName" />
    <result column="FIRST_NAME" jdbcType="VARCHAR" property="firstName" />
    <result column="ID_TYPE" jdbcType="VARCHAR" property="idType" />
    <result column="ID_NO" jdbcType="VARCHAR" property="idNo" />
    <result column="CARDHOLDER_MOBILE" jdbcType="VARCHAR" property="cardholderMobile" />
    <result column="CARDHOLDER_EMAIL" jdbcType="VARCHAR" property="cardholderEmail" />
    <result column="EXTERNAL_ID" jdbcType="VARCHAR" property="externalId" />
    <result column="DEPARTMENT_ID" jdbcType="VARCHAR" property="departmentId" />
    <result column="CARDHOLDER_BIRTHDAY" jdbcType="CHAR" property="cardholderBirthday" />
    <result column="CARDHOLDER_GENDER" jdbcType="VARCHAR" property="cardholderGender" />
    <result column="CARDHOLDER_SALUTATION" jdbcType="VARCHAR" property="cardholderSalutation" />
    <result column="CARDHOLDER_FUNCTION" jdbcType="VARCHAR" property="cardholderFunction" />
    <result column="CARDHOLDER_SEGMENT" jdbcType="VARCHAR" property="cardholderSegment" />
    <result column="CARDHOLDER_STATE" jdbcType="CHAR" property="cardholderState" />
    <result column="CLOSE_DATE" jdbcType="CHAR" property="closeDate" />
    <result column="CARDHOLDER_COMMENT" jdbcType="VARCHAR" property="cardholderComment" />
    <result column="CREATE_USER" jdbcType="VARCHAR" property="createUser" />
    <result column="CREATE_TIME" jdbcType="CHAR" property="createTime" />
    <result column="MODIFY_USER" jdbcType="VARCHAR" property="modifyUser" />
    <result column="MODIFY_TIME" jdbcType="CHAR" property="modifyTime" />
    <result column="DATA_STATE" jdbcType="CHAR" property="dataState" />
    <result column="MEMBER_ID" jdbcType="VARCHAR" property="memberId" />
    <result column="CHECK_STATE" jdbcType="VARCHAR" property="checkState" />
    <result column="VID" jdbcType="VARCHAR" property="v_Id" />
    <result column="PLATE_NUMBER" jdbcType="VARCHAR" property="plateNumber" />
    <result column="DRIVER_LICENCE" jdbcType="VARCHAR" property="driverLicence" />
    <result column="MAILING_ADDRESS" jdbcType="VARCHAR" property="mailingAddress" />
  </resultMap>
  
  <resultMap class="com.allinfinance.univer.seller.cardholder.dto.CardholderDTO"  id="cardholderDTO" >
  	<result column="CARDHOLDER_ID" jdbcType="VARCHAR" property="cardholderId" />
    <result column="ENTITY_ID" jdbcType="VARCHAR" property="entityId" />
    <result column="LAST_NAME" jdbcType="VARCHAR" property="lastName" />
    <result column="FIRST_NAME" jdbcType="VARCHAR" property="firstName" />
    <result column="ID_TYPE" jdbcType="VARCHAR" property="idType" />
    <result column="ID_NO" jdbcType="VARCHAR" property="idNo" />
    <result column="CARDHOLDER_MOBILE" jdbcType="VARCHAR" property="cardholderMobile" />
    <result column="CARDHOLDER_EMAIL" jdbcType="VARCHAR" property="cardholderEmail" />
    <result column="EXTERNAL_ID" jdbcType="VARCHAR" property="externalId" />
    <result column="DEPARTMENT_ID" jdbcType="VARCHAR" property="departmentId" />
    <result column="CARDHOLDER_BIRTHDAY" jdbcType="CHAR" property="cardholderBirthday" />
    <result column="CARDHOLDER_GENDER" jdbcType="VARCHAR" property="cardholderGender" />
    <result column="CARDHOLDER_SALUTATION" jdbcType="VARCHAR" property="cardholderSalutation" />
    <result column="CARDHOLDER_FUNCTION" jdbcType="VARCHAR" property="cardholderFunction" />
    <result column="CARDHOLDER_SEGMENT" jdbcType="VARCHAR" property="cardholderSegment" />
    <result column="CARDHOLDER_STATE" jdbcType="CHAR" property="cardholderState" />
    <result column="CLOSE_DATE" jdbcType="CHAR" property="closeDate" />
    <result column="CARDHOLDER_COMMENT" jdbcType="VARCHAR" property="cardholderComment" />
    <result column="MEMBER_ID" jdbcType="VARCHAR" property="memberId" />
    <result column="CHECK_STATE" jdbcType="VARCHAR" property="checkState" />
    <result column="VID" jdbcType="VARCHAR" property="v_Id" />
    <result column="PLATE_NUMBER" jdbcType="VARCHAR" property="plateNumber" />
    <result column="DRIVER_LICENCE" jdbcType="VARCHAR" property="driverLicence" />
  </resultMap>
  
  <resultMap class="com.allinfinance.univer.seller.cardholder.dto.IdCardInfoDTO" id="idCardInfoDTO">
  	<result column="ID_NO" jdbcType="VARCHAR" property="idNo" />
    <result column="ID_TYPE" jdbcType="VARCHAR" property="idType" />
    <result column="IMGF_PATH" jdbcType="VARCHAR" property="imgfPath" />
    <result column="IMGB_PATH" jdbcType="VARCHAR" property="imgbPath" />
    
  </resultMap>
  
  <sql id="abatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="abatorgenerated_selectByPrimaryKey" parameterClass="com.huateng.framework.ibatis.model.Cardholder" resultMap="abatorgenerated_CardholderResult">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    select CARDHOLDER_ID, ENTITY_ID, LAST_NAME, FIRST_NAME, ID_TYPE, ID_NO, CARDHOLDER_MOBILE,
      CARDHOLDER_EMAIL, EXTERNAL_ID, DEPARTMENT_ID, CARDHOLDER_BIRTHDAY, CARDHOLDER_GENDER,
      CARDHOLDER_SALUTATION, CARDHOLDER_FUNCTION, CARDHOLDER_SEGMENT, CARDHOLDER_STATE, CLOSE_DATE,
      CARDHOLDER_COMMENT, CREATE_USER, CREATE_TIME, MODIFY_USER, MODIFY_TIME, DATA_STATE, MEMBER_ID,
      CHECK_STATE,VID,PLATE_NUMBER,DRIVER_LICENCE,MAILING_ADDRESS
    from TB_CARDHOLDER
    where CARDHOLDER_ID = #cardholderId:VARCHAR#
  </select>
  <select id="abatorgenerated_selectByExample" parameterClass="com.huateng.framework.ibatis.model.CardholderExample" resultMap="abatorgenerated_CardholderResult">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    select CARDHOLDER_ID, ENTITY_ID, LAST_NAME, FIRST_NAME, ID_TYPE, ID_NO, CARDHOLDER_MOBILE,
      CARDHOLDER_EMAIL, EXTERNAL_ID, DEPARTMENT_ID, CARDHOLDER_BIRTHDAY, CARDHOLDER_GENDER,
      CARDHOLDER_SALUTATION, CARDHOLDER_FUNCTION, CARDHOLDER_SEGMENT, CARDHOLDER_STATE, CLOSE_DATE,
      CARDHOLDER_COMMENT, CREATE_USER, CREATE_TIME, MODIFY_USER, MODIFY_TIME, DATA_STATE, MEMBER_ID,
      CHECK_STATE,VID,PLATE_NUMBER,DRIVER_LICENCE,MAILING_ADDRESS
    from TB_CARDHOLDER
    <isParameterPresent>
      <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
      <isNotEmpty property="orderByClause">
        order by $orderByClause$
      </isNotEmpty>
    </isParameterPresent>
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.huateng.framework.ibatis.model.Cardholder">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    delete from TB_CARDHOLDER
    where CARDHOLDER_ID = #cardholderId:VARCHAR#
  </delete>
  <delete id="abatorgenerated_deleteByExample" parameterClass="com.huateng.framework.ibatis.model.CardholderExample">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    delete from TB_CARDHOLDER
    <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="abatorgenerated_insert" parameterClass="com.huateng.framework.ibatis.model.Cardholder">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    insert into TB_CARDHOLDER (CARDHOLDER_ID, ENTITY_ID, LAST_NAME, FIRST_NAME, ID_TYPE, ID_NO,
      CARDHOLDER_MOBILE, CARDHOLDER_EMAIL, EXTERNAL_ID, DEPARTMENT_ID, CARDHOLDER_BIRTHDAY,
      CARDHOLDER_GENDER, CARDHOLDER_SALUTATION, CARDHOLDER_FUNCTION, CARDHOLDER_SEGMENT,
      CARDHOLDER_STATE, CLOSE_DATE, CARDHOLDER_COMMENT, CREATE_USER, CREATE_TIME, MODIFY_USER,
      MODIFY_TIME, DATA_STATE, MEMBER_ID, CHECK_STATE,VID,PLATE_NUMBER,DRIVER_LICENCE,MAILING_ADDRESS)
    values (#cardholderId:VARCHAR#, #entityId:VARCHAR#, #lastName:VARCHAR#, #firstName:VARCHAR#,
      #idType:VARCHAR#, #idNo:VARCHAR#, #cardholderMobile:VARCHAR#, #cardholderEmail:VARCHAR#,
      #externalId:VARCHAR#, #departmentId:VARCHAR#, #cardholderBirthday:CHAR#,
      #cardholderGender:VARCHAR#, #cardholderSalutation:VARCHAR#, #cardholderFunction:VARCHAR#,
      #cardholderSegment:VARCHAR#, #cardholderState:CHAR#, #closeDate:CHAR#,
      #cardholderComment:VARCHAR#, #createUser:VARCHAR#, #createTime:CHAR#, #modifyUser:VARCHAR#,
      #modifyTime:CHAR#, #dataState:CHAR#, #memberId:VARCHAR#, #checkState:VARCHAR#, #v_Id:VARCHAR#, #plateNumber:VARCHAR#, #driverLicence:VARCHAR#, #mailingAddress:VARCHAR#)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.huateng.framework.ibatis.model.Cardholder">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    update TB_CARDHOLDER
    set ENTITY_ID = #entityId:VARCHAR#,
      LAST_NAME = #lastName:VARCHAR#,
      FIRST_NAME = #firstName:VARCHAR#,
      ID_TYPE = #idType:VARCHAR#,
      ID_NO = #idNo:VARCHAR#,
      CARDHOLDER_MOBILE = #cardholderMobile:VARCHAR#,
      CARDHOLDER_EMAIL = #cardholderEmail:VARCHAR#,
      EXTERNAL_ID = #externalId:VARCHAR#,
      DEPARTMENT_ID = #departmentId:VARCHAR#,
      CARDHOLDER_BIRTHDAY = #cardholderBirthday:CHAR#,
      CARDHOLDER_GENDER = #cardholderGender:VARCHAR#,
      CARDHOLDER_SALUTATION = #cardholderSalutation:VARCHAR#,
      CARDHOLDER_FUNCTION = #cardholderFunction:VARCHAR#,
      CARDHOLDER_SEGMENT = #cardholderSegment:VARCHAR#,
      CARDHOLDER_STATE = #cardholderState:CHAR#,
      CLOSE_DATE = #closeDate:CHAR#,
      CARDHOLDER_COMMENT = #cardholderComment:VARCHAR#,
      CREATE_USER = #createUser:VARCHAR#,
      CREATE_TIME = #createTime:CHAR#,
      MODIFY_USER = #modifyUser:VARCHAR#,
      MODIFY_TIME = #modifyTime:CHAR#,
      DATA_STATE = #dataState:CHAR#,
      MEMBER_ID = #memberId:VARCHAR#,
      CHECK_STATE = #checkState:VARCHAR#,
       VID=#v_Id:VARCHAR#,
       PLATE_NUMBER=#plateNumber:VARCHAR#,
       DRIVER_LICENCE=#driverLicence:VARCHAR# 
    where CARDHOLDER_ID = #cardholderId:VARCHAR#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.huateng.framework.ibatis.model.Cardholder">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    update TB_CARDHOLDER
    <dynamic prepend="set">
      <isNotEmpty prepend="," property="entityId">
        ENTITY_ID = #entityId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="lastName">
        LAST_NAME = #lastName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="firstName">
        FIRST_NAME = #firstName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="idType">
        ID_TYPE = #idType:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="idNo">
        ID_NO = #idNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderMobile">
        CARDHOLDER_MOBILE = #cardholderMobile:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderEmail">
        CARDHOLDER_EMAIL = #cardholderEmail:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="externalId">
        EXTERNAL_ID = #externalId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="departmentId">
        DEPARTMENT_ID = #departmentId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderBirthday">
        CARDHOLDER_BIRTHDAY = #cardholderBirthday:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderGender">
        CARDHOLDER_GENDER = #cardholderGender:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderSalutation">
        CARDHOLDER_SALUTATION = #cardholderSalutation:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderFunction">
        CARDHOLDER_FUNCTION = #cardholderFunction:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderSegment">
        CARDHOLDER_SEGMENT = #cardholderSegment:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderState">
        CARDHOLDER_STATE = #cardholderState:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="closeDate">
        CLOSE_DATE = #closeDate:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="cardholderComment">
        CARDHOLDER_COMMENT = #cardholderComment:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="createUser">
        CREATE_USER = #createUser:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="createTime">
        CREATE_TIME = #createTime:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="modifyUser">
        MODIFY_USER = #modifyUser:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="modifyTime">
        MODIFY_TIME = #modifyTime:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="dataState">
        DATA_STATE = #dataState:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="memberId">
        MEMBER_ID = #memberId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="checkState">
        CHECK_STATE = #checkState:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="v_Id">
       VID=#v_Id:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="plateNumber">
        PLATE_NUMBER=#plateNumber:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="driverLicence">
       DRIVER_LICENCE=#driverLicence:VARCHAR#
      </isNotEmpty> 
       <isNotEmpty prepend="," property="mailingAddress">
       MAILING_ADDRESS=#mailingAddress:VARCHAR#
      </isNotEmpty> 
    </dynamic>
    where CARDHOLDER_ID = #cardholderId:VARCHAR#
  </update>
  <update id="abatorgenerated_checkUpdateByPrimaryKeySelective" parameterClass="com.huateng.framework.ibatis.model.Cardholder">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    update TB_CARDHOLDER set 
       CHECK_STATE=#checkState:VARCHAR# 
    where CARDHOLDER_ID = #cardholderId:VARCHAR#
  </update>
  <select id="abatorgenerated_countByExample" parameterClass="com.huateng.framework.ibatis.model.CardholderExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    select count(*) from TB_CARDHOLDER
    <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
  </select>
  <select id="getCardHolderInfo" parameterClass="com.allinfinance.univer.seller.cardholder.dto.CardholderDTO" resultClass="com.allinfinance.univer.seller.cardholder.dto.CardholderDTO">
    select CARDHOLDER_ID as "cardholderId",ENTITY_ID as "entityId",ID_NO as "idNo" from TB_CARDHOLDER where ID_NO=#idNo:VARCHAR#
  </select>
  <update id="abatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    update TB_CARDHOLDER
    <dynamic prepend="set">
      <isNotEmpty prepend="," property="record.cardholderId">
        CARDHOLDER_ID = #record.cardholderId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.entityId">
        ENTITY_ID = #record.entityId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.lastName">
        LAST_NAME = #record.lastName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.firstName">
        FIRST_NAME = #record.firstName:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.idType">
        ID_TYPE = #record.idType:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.idNo">
        ID_NO = #record.idNo:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderMobile">
        CARDHOLDER_MOBILE = #record.cardholderMobile:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderEmail">
        CARDHOLDER_EMAIL = #record.cardholderEmail:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.externalId">
        EXTERNAL_ID = #record.externalId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.departmentId">
        DEPARTMENT_ID = #record.departmentId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderBirthday">
        CARDHOLDER_BIRTHDAY = #record.cardholderBirthday:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderGender">
        CARDHOLDER_GENDER = #record.cardholderGender:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderSalutation">
        CARDHOLDER_SALUTATION = #record.cardholderSalutation:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderFunction">
        CARDHOLDER_FUNCTION = #record.cardholderFunction:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderSegment">
        CARDHOLDER_SEGMENT = #record.cardholderSegment:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderState">
        CARDHOLDER_STATE = #record.cardholderState:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.closeDate">
        CLOSE_DATE = #record.closeDate:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.cardholderComment">
        CARDHOLDER_COMMENT = #record.cardholderComment:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.createUser">
        CREATE_USER = #record.createUser:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.createTime">
        CREATE_TIME = #record.createTime:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.modifyUser">
        MODIFY_USER = #record.modifyUser:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.modifyTime">
        MODIFY_TIME = #record.modifyTime:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.dataState">
        DATA_STATE = #record.dataState:CHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.memberId">
        MEMBER_ID = #record.memberId:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.checkState">
        CHECK_STATE = #record.checkState:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.mailingAddress">
        MAILING_ADDRESS = #record.mailingAddress:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.plateNumber">
        PLATE_NUMBER = #record.plateNumber:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.v_Id">
        VID = #record.v_Id:VARCHAR#
      </isNotEmpty>
      <isNotEmpty prepend="," property="record.driverLicence">
        DRIVER_LICENCE = #record.driverLicence:VARCHAR#
      </isNotEmpty>
    </dynamic>
    <isParameterPresent>
      <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="abatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Wed Jan 05 14:00:47 CST 2011.
    -->
    update TB_CARDHOLDER
    set CARDHOLDER_ID = #record.cardholderId:VARCHAR#,
      ENTITY_ID = #record.entityId:VARCHAR#,
      LAST_NAME = #record.lastName:VARCHAR#,
      FIRST_NAME = #record.firstName:VARCHAR#,
      ID_TYPE = #record.idType:VARCHAR#,
      ID_NO = #record.idNo:VARCHAR#,
      CARDHOLDER_MOBILE = #record.cardholderMobile:VARCHAR#,
      CARDHOLDER_EMAIL = #record.cardholderEmail:VARCHAR#,
      EXTERNAL_ID = #record.externalId:VARCHAR#,
      DEPARTMENT_ID = #record.departmentId:VARCHAR#,
      CARDHOLDER_BIRTHDAY = #record.cardholderBirthday:CHAR#,
      CARDHOLDER_GENDER = #record.cardholderGender:VARCHAR#,
      CARDHOLDER_SALUTATION = #record.cardholderSalutation:VARCHAR#,
      CARDHOLDER_FUNCTION = #record.cardholderFunction:VARCHAR#,
      CARDHOLDER_SEGMENT = #record.cardholderSegment:VARCHAR#,
      CARDHOLDER_STATE = #record.cardholderState:CHAR#,
      CLOSE_DATE = #record.closeDate:CHAR#,
      CARDHOLDER_COMMENT = #record.cardholderComment:VARCHAR#,
      CREATE_USER = #record.createUser:VARCHAR#,
      CREATE_TIME = #record.createTime:CHAR#,
      MODIFY_USER = #record.modifyUser:VARCHAR#,
      MODIFY_TIME = #record.modifyTime:CHAR#,
      DATA_STATE = #record.dataState:CHAR#,
      MEMBER_ID = #record.memberId:VARCHAR#,
      CHECK_STATE = #record.checkState:VARCHAR#
    <isParameterPresent>
      <include refid="TB_CARDHOLDER.abatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  
  <select id="getImgInfoByIdNo" parameterClass="java.lang.String" resultMap="idCardInfoDTO" >
  		 SELECT
		    ID_NO,
	        ID_TYPE,
	        IMGF_PATH,
	        IMGB_PATH
	       
		FROM
		    TB_PICTURE_INFO
		WHERE
		    ID_NO=#idNo:VARCHAR# 
		    and ID_TYPE=1
		      order by UPDATE_DATE desc
  </select> 
  
  <select id="selectCardHolderOnDelete" parameterClass="java.lang.String" resultClass="java.lang.Integer">

   select COUNT(*) 
   FROM
     TB_SELL_ORDER T1
   LEFT JOIN
     TB_SELL_ORDER_CARD_LIST T2
   ON
     T1.ORDER_ID=T2.ORDER_ID
   WHERE 
     T1.ORDER_STATE!=0
     AND
     T2.CARDHOLDER_ID=# cardholderId:VARCHAR#  
  </select>
  
  <select id="selectCardHolderByCardNo" parameterClass="java.lang.String" resultClass="com.allinfinance.univer.seller.cardholder.dto.CardholderQueryDTO">

        select 
	        cardHolder.cardholder_id as "cardholderId",
	        cardHolder.first_name as "firstName" , 
	        cardHolder.id_no as "idNo", 
	        cardHolder.id_type as "idType", 
	        cardHolder.cardholder_mobile as "cardholderMobile" 
        from tb_sell_order ord,tb_sell_order_card_list cardList,tb_cardholder cardHolder 
     where (ord.order_state = '32' or ord.order_state is null) and cardList.Card_No=#cardNo:VARCHAR# and cardList.Cardholder_Id=cardHolder.Cardholder_Id
      and ord.order_id=cardList.Order_Id
     UNION ALL
      select 
	        company.RELATION_NO as "cardholderId",
	        company.COMPANY_NAME as "firstName" , 
	        company.COMPANY_ID as "idNo", 
	        company.COMPANY_ID_TYPE as "idType", 
	        company.LINKPHONE as "cardholderMobile" 
        from tb_sell_order ord1,tb_sell_order_card_list cardList1,TB_COMPANY_INFO company 
     where (ord1.order_state = '32' or ord1.order_state is null) and cardList1.Card_No=#cardNo:VARCHAR# and cardList1.Cardholder_Id=company.RELATION_NO
      and ord1.order_id=cardList1.Order_Id 
     
  </select>
  
  <select id="selectCardInfoByCardholderId" resultClass="java.lang.Integer"  parameterClass="com.allinfinance.univer.seller.cardholder.dto.CardholderDTO" >
    select  COUNT(*) 
    from
        TB_ACC_CARD_INFO
    where CARDHOLDER_ID =#cardholderId:VARCHAR#
  </select>
  <select id="selectCardHolderByIdNo"  parameterClass="com.allinfinance.univer.seller.cardholder.dto.CardholderDTO" 
		resultMap="cardholderDTO">
    select  
	    CARDHOLDER_ID,ENTITY_ID,LAST_NAME,FIRST_NAME,ID_TYPE,ID_NO,
	    CARDHOLDER_MOBILE,CARDHOLDER_EMAIL,EXTERNAL_ID,DEPARTMENT_ID,
	    CARDHOLDER_BIRTHDAY,CARDHOLDER_GENDER,CARDHOLDER_SALUTATION,
	    CARDHOLDER_FUNCTION,CARDHOLDER_SEGMENT,CARDHOLDER_STATE,
	    CLOSE_DATE,CARDHOLDER_COMMENT,MEMBER_ID,CHECK_STATE,VID,
	    PLATE_NUMBER,DRIVER_LICENCE
    from
        TB_CARDHOLDER
    where 
    	ID_NO =#idNo:VARCHAR#
    <dynamic>
    <isNotEmpty prepend="and" property="idType">
    ID_TYPE=#idType:VARCHAR#
    </isNotEmpty>
    </dynamic>
    and 
    	DATA_STATE = '1'    
    UNION ALL
    select  
	    CARDHOLDER_ID,ENTITY_ID,LAST_NAME,FIRST_NAME,ID_TYPE,ID_NO,
	    CARDHOLDER_MOBILE,CARDHOLDER_EMAIL,EXTERNAL_ID,DEPARTMENT_ID,
	    CARDHOLDER_BIRTHDAY,CARDHOLDER_GENDER,CARDHOLDER_SALUTATION,
	    CARDHOLDER_FUNCTION,CARDHOLDER_SEGMENT,CARDHOLDER_STATE,
	    CLOSE_DATE,CARDHOLDER_COMMENT,MEMBER_ID,CHECK_STATE,VID,
	    PLATE_NUMBER,DRIVER_LICENCE
    from
        TB_CARDHOLDER_VERIFY
    where 
    	ID_NO =#idNo:VARCHAR#
    <dynamic>
    <isNotEmpty prepend="and" property="idType">
    ID_TYPE=#idType:VARCHAR#
    </isNotEmpty>
    </dynamic>
    and 
    	DATA_STATE = '1' and CHECK_STATE != '3'
  </select>
  <select id="selectOtherHolderByIdNo"  parameterClass="com.allinfinance.univer.seller.cardholder.dto.CardholderDTO" 
		resultMap="cardholderDTO">
	select
	CARDHOLDER_ID,ENTITY_ID,LAST_NAME,FIRST_NAME,ID_TYPE,ID_NO,CARDHOLDER_MOBILE,CARDHOLDER_EMAIL,EXTERNAL_ID,DEPARTMENT_ID,CARDHOLDER_BIRTHDAY,CARDHOLDER_GENDER,CARDHOLDER_SALUTATION,CARDHOLDER_FUNCTION,CARDHOLDER_SEGMENT,CARDHOLDER_STATE,CLOSE_DATE,CARDHOLDER_COMMENT,MEMBER_ID,CHECK_STATE,VID,PLATE_NUMBER,DRIVER_LICENCE
	from
	TB_CARDHOLDER
	where ID_NO =#idNo:VARCHAR#
	 and DATA_STATE = '1'
	<dynamic>
		<isNotEmpty prepend="and" property="idType">
		ID_TYPE=#idType:VARCHAR#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="cardholderId">
    		<![CDATA[
    		CARDHOLDER_ID <> #cardholderId:VARCHAR#
    		]]>
		</isNotEmpty>
	</dynamic>
  </select>
  
</sqlMap>